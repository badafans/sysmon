# 系统监控面板 (System Monitor Dashboard)

一个基于 Go 语言开发的轻量级系统监控工具，提供实时的系统性能监控和美观的 Web 界面。

## 功能特性

### 🖥️ 系统信息监控
- **运行时间**: 系统启动时间统计
- **负载均衡**: 1分钟、5分钟、15分钟平均负载
- **CPU温度**: 实时CPU温度监控

### 🔥 CPU 监控
- **实时使用率**: CPU使用率百分比
- **可视化进度条**: 直观显示CPU负载状态

### 🧠 内存监控
- **总容量**: 系统总内存大小
- **已使用**: 当前内存使用量
- **可用内存**: 剩余可用内存
- **使用率**: 内存使用百分比
- **精确计算**: 包含 SReclaimable 的准确内存计算

### 💾 磁盘监控
- **总容量**: 磁盘总空间
- **已使用**: 磁盘使用空间
- **可用空间**: 磁盘剩余空间
- **使用率**: 磁盘使用百分比
- **智能统计**: 自动过滤虚拟文件系统，统计实际磁盘使用情况

### 🌐 网络监控
- **实时速率**: 接收/发送速率 (kB/s)
- **累计流量**: 总接收/发送流量统计
- **动态切换**: 支持在 Web 界面动态切换网络接口
- **智能选择**: 自动检测可用网卡，运行期间保持选择

### 🔄 SWAP 监控
- **总容量**: SWAP 总大小
- **已使用**: SWAP 使用量
- **空闲空间**: SWAP 剩余空间

## 技术特点

- **🚀 轻量级**: 单文件部署，无外部依赖
- **📱 响应式设计**: 支持桌面和移动设备
- **🎨 现代化UI**: 渐变背景、卡片式布局、动画效果
- **⚡ 实时更新**: 自动刷新数据，支持页面可见性检测
- **🔧 可配置**: 支持自定义端口
- **🔄 动态切换**: 无需重启即可切换网络接口
- **💾 内存管理**: 运行期间保持网卡选择状态
- **🌐 RESTful API**: 提供 JSON 格式的系统状态接口

## 安装和使用

### 快速开始

1. **编译程序**
   ```bash
   # 编译程序
   go build -o sysmon sysmon.go
   ```

2. **运行程序**
   ```bash
   # 使用默认配置运行（自动检测网卡）
   ./sysmon
   
   # 自定义端口
   ./sysmon -port 9090
   ```

3. **访问监控面板**
   - 打开浏览器访问: `http://localhost:8080`
   - API接口: `http://localhost:8080/api/stats`

### 命令行参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `-port` | 8080 | Web服务器端口 |

### 使用示例

```bash
# 在8080端口启动，自动检测并选择网卡
./sysmon

# 在9090端口启动
./sysmon -port 9090

# 查看帮助信息
./sysmon -h
```

### 网卡切换

程序启动后，可以通过 Web 界面动态切换网络接口：
1. 在网络信息卡片中找到网卡选择下拉框
2. 选择要监控的网络接口
3. 系统会自动切换并在运行期间保持选择
4. 重启程序后会自动选择第一个可用网卡

## API 接口

### GET /api/stats

返回系统状态的 JSON 数据：

### GET /api/interfaces

返回可用网络接口列表和当前选定接口：

```json
{
  "interfaces": ["eth0", "ens33", "wlan0"],
  "current": "eth0"
}
```

### POST /api/switch-interface

切换网络接口，请求体：

```json
{
  "interface": "ens33"
}
```

返回：

```json
{
  "success": true,
  "message": "网络接口已切换到 ens33"
}
```

### 系统状态数据格式

```json
{
  "run_time": "2 days, 3 hours, 45 minutes",
  "last1": "0.15",
  "last5": "0.20",
  "last15": "0.18",
  "cpu_usage": "25.6",
  "cpu_temp": "45°C",
  "mem_total_space": "8192",
  "mem_used_space": "4096",
  "mem_free_space": "4096",
  "mem_usage": "50.0",
  "disk_total_space": "500.0",
  "disk_used_space": "250.0",
  "disk_available_space": "250.0",
  "disk_usage": "50.0",
  "receive_speed": "1024",
  "transmit_speed": "512",
  "receive_total": "10.5",
  "transmit_total": "5.2",
  "swap_total_space": "2048",
  "swap_used_space": "0",
  "swap_free_space": "2048",
  "lastest_time": "2024-01-01 12:00:00"
}
```

## 编译

使用 Go 语言标准编译方式：

```bash
# 编译当前平台版本 (仅限 Linux)
go build -o sysmon sysmon.go
```

**注意**: 本程序仅支持 Linux 系统，在其他操作系统上编译的程序无法正常运行。

## 系统要求

### 支持的操作系统
- **Linux**: 完全支持 (推荐)
  - Ubuntu 18.04+
  - CentOS 7+
  - Debian 9+
  - RHEL 7+
  - 其他主流 Linux 发行版

### 系统依赖
- **文件系统**: 需要 `/proc` 和 `/sys` 文件系统支持
- **权限**: 读取 `/proc` 和 `/sys` 目录的权限
- **命令**: 系统需要支持 `df` 命令
- **网络**: 需要指定的网络接口存在
- **端口**: 确保指定端口未被占用

### 不支持的系统
- **Windows**: 不支持 (缺少 `/proc` 文件系统)
- **macOS**: 不支持 (缺少 `/proc` 文件系统)
- **FreeBSD/OpenBSD**: 不支持 (文件系统结构不同)

## 监控数据说明

### 内存计算
程序使用精确的内存计算公式：
```
已使用内存 = 总内存 - 空闲内存 - 缓冲区 - 缓存 - 可回收内存(SReclaimable)
```
这与 `free -m` 命令的计算方式保持一致。

### 磁盘统计
程序会自动过滤以下虚拟文件系统：
- tmpfs, devtmpfs
- proc, sysfs, devpts
- cgroup, cgroup2
- overlay, aufs
- docker 相关文件系统

只统计实际的物理磁盘使用情况。

## 界面预览

监控面板采用现代化设计，包含：
- 🎨 渐变背景和毛玻璃效果
- 📊 实时更新的进度条
- 📱 响应式卡片布局
- ⚡ 平滑的动画过渡
- 🌙 优雅的悬停效果

## 故障排除

### 常见问题

1. **端口被占用**
   ```
   listen tcp :8080: bind: address already in use
   ```
   解决方案：使用 `-port` 参数指定其他端口。

2. **权限不足**
   确保程序有读取 `/proc` 文件系统的权限。

### 调试信息

程序启动时会显示：
```
Web服务器启动在 :8080
```

## 开发信息

- **语言**: Go 1.18+
- **依赖**: 仅使用标准库
- **架构**: 单文件部署
- **许可**: MIT License

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！